<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Boot Strap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- CSS/JS scripts -->
    <link rel="stylesheet" type="text/css" href="CommonTheme.css">
    <script src="CommonActions.js"></script>
</head>
<body>
<div class="mainHeader">
    <h2 class="text-white p-3 display-4 contentPane">Login as Student</h2>
</div>
<hr>

<div id="callout-div" class="px-2"></div>

<div class="container d-flex align-items-center justify-content-center">
    <div class="card m-2 p-3 border-dark" style="max-width: 18rem;">
        <h5 class="card-title">Please Input ID</h5>
        <input type="text" class="form-text m-2" id="studIdInput">
        <button class="btn btn-danger m-2" th:onclick="'loginStudent(' + ${numberOfStudents} + ')'">Log in</button>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

<script th:inline="javascript">

    function loginStudent(maxStudents){
        let inputId = document.getElementById("studIdInput").value

        if (typeof Number(inputId) === 'number'){
            if (inputId > 0 && inputId <= maxStudents){
                location.href = "/studentView/" + inputId;
            } else {
                console.log("Invalid input")
                $('#callout-div').empty();
                createCallout("danger", "callout-div", "<h4>ERROR</h4>There is no student with id: " + inputId);
            }

        } else {
            console.log("Incorrect value inputted!")
            $('#callout-div').empty();
            createCallout("danger", "callout-div", "<h4>ERROR</h4>{" + inputId + "} is not valid input for student ID (expecting int)");
        }

    }

</script>

</body>
</html>